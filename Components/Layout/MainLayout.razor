@inherits LayoutComponentBase

<MudThemeProvider Theme="_theme" />
<MudPopoverProvider />
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout>
    <MudAppBar Elevation="0" Fixed="true" Style="background: var(--fi-surface-card); color: var(--fi-text-primary); border-bottom: 1px solid var(--fi-separator); box-shadow: 0 1px 6px rgba(0,0,0,0.03);">
        <MudIcon Icon="@Icons.Material.Filled.FoodBank" Class="mr-2" Style="color: var(--fi-accent-primary);" />
        <MudText Typo="Typo.h6" Style="font-weight: 600;">Food Inspector</MudText>
        <MudSpacer />
    </MudAppBar>

    <MudMainContent Class="pa-4" Style="padding-top: 80px !important; padding-bottom: 80px !important; background: var(--fi-bg-primary);">
        @Body
    </MudMainContent>

    <MudAppBar Bottom="true" Elevation="0" Fixed="true" Style="height: 64px; background: var(--fi-surface-card); border-top: 1px solid var(--fi-separator); box-shadow: 0 -1px 6px rgba(0,0,0,0.04);">
        <MudGrid Spacing="0" Justify="Justify.SpaceAround" Style="width: 100%;">
            <MudItem>
                <NavLink href="/" Match="NavLinkMatch.All" class="nav-link-item">
                    <MudStack AlignItems="AlignItems.Center" Spacing="0">
                        <MudIcon Icon="@Icons.Material.Filled.QrCodeScanner" />
                        <MudText Typo="Typo.caption">Scan</MudText>
                    </MudStack>
                </NavLink>
            </MudItem>
            <MudItem>
                <NavLink href="/history" class="nav-link-item">
                    <MudStack AlignItems="AlignItems.Center" Spacing="0">
                        <MudIcon Icon="@Icons.Material.Filled.History" />
                        <MudText Typo="Typo.caption">History</MudText>
                    </MudStack>
                </NavLink>
            </MudItem>
            <MudItem>
                <NavLink href="/cross-reactivity" class="nav-link-item">
                    <MudStack AlignItems="AlignItems.Center" Spacing="0">
                        <MudIcon Icon="@Icons.Material.Filled.Share" />
                        <MudText Typo="Typo.caption">Cross-React</MudText>
                    </MudStack>
                </NavLink>
            </MudItem>
            <MudItem>
                <NavLink href="/settings" class="nav-link-item">
                    <MudStack AlignItems="AlignItems.Center" Spacing="0">
                        <MudIcon Icon="@Icons.Material.Filled.Settings" />
                        <MudText Typo="Typo.caption">Settings</MudText>
                    </MudStack>
                </NavLink>
            </MudItem>
        </MudGrid>
    </MudAppBar>
</MudLayout>

@code {
    private readonly MudTheme _theme = new()
    {
        PaletteLight = new PaletteLight
        {
            Primary = "#007AFF",
            PrimaryDarken = "#0056B3",
            PrimaryLighten = "#4DA3FF",
            Secondary = "#5856D6",
            Tertiary = "#FF9F0A",
            Info = "#5AC8FA",
            Success = "#34C759",
            Warning = "#FF9F0A",
            Error = "#FF3B30",
            AppbarBackground = "#FFFFFF",
            AppbarText = "#1C1C1E",
            Background = "#F4F4F9",
            Surface = "#FFFFFF",
            DrawerBackground = "#FFFFFF",
            TextPrimary = "#1C1C1E",
            TextSecondary = "#3A3A3C",
            TextDisabled = "#8E8E93",
            Divider = "#D1D1D6",
            DividerLight = "#E5E5EA"
        },
        Typography = new Typography
        {
            Default = new Default
            {
                FontFamily = new[] { "-apple-system", "SF Pro Text", "Helvetica Neue", "Roboto", "sans-serif" }
            }
        },
        LayoutProperties = new LayoutProperties
        {
            DefaultBorderRadius = "10px"
        }
    };
}

<style>
    .nav-link-item {
        text-decoration: none;
        color: var(--fi-text-quaternary);
        padding: 8px 16px;
        display: flex;
        flex-direction: column;
        align-items: center;
        transition: color 0.15s ease;
    }

    .nav-link-item:hover {
        color: var(--fi-text-secondary);
    }

    .nav-link-item.active {
        color: var(--fi-accent-primary);
    }

    /* Subtle section personality via active accent */
    .nav-link-item[href='/cross-reactivity'].active {
        color: var(--fi-accent-secondary);
    }

    .nav-link-item[href='/settings'].active {
        color: var(--fi-text-secondary);
    }
</style>
